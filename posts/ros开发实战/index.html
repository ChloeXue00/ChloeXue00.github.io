<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>å¦‚ä½•ä½¿ç”¨ C&#43;&#43; ç¼–å†™ä¸€ä¸ª ROS è®¾å¤‡é©±åŠ¨èŠ‚ç‚¹ | </title>
<meta name="keywords" content="C&#43;&#43;, ä¼ æ„Ÿå™¨é©±åŠ¨, IMU, rosbag, è‡ªåŠ¨é©¾é©¶">
<meta name="description" content="é€šè¿‡æœ¬æ¡ˆä¾‹å¯ä»¥æŒæ¡ï¼š

å¦‚ä½•ä½¿ç”¨ C&#43;&#43; ç¼–å†™ä¸€ä¸ª ROS è®¾å¤‡é©±åŠ¨èŠ‚ç‚¹ï¼›
å¦‚ä½•è°ƒè¯• ROS å‘å¸ƒé¢‘ç‡ã€æ—¶é—´æˆ³å’Œæ¶ˆæ¯å†…å®¹ï¼›
å¦‚ä½•ç»“åˆ rosbag ä¸ rqt_plot åˆ†æä¼ æ„Ÿå™¨æ•°æ®çš„ç¨³å®šæ€§ï¼›
ä¸ºåç»­å¤šä¼ æ„Ÿå™¨æ—¶é—´åŒæ­¥ä¸èåˆï¼ˆå¦‚ EKFï¼‰æ‰“ä¸‹åŸºç¡€ã€‚

ğŸŒ å¤šä¼ æ„Ÿå™¨èåˆä¸­çš„ ROS é©±åŠ¨å¼€å‘å®æˆ˜æ¡ˆä¾‹
åœ¨è‡ªåŠ¨é©¾é©¶ç³»ç»Ÿä¸­ï¼ŒIMUã€GNSS å’Œé›·è¾¾ç­‰ä¼ æ„Ÿå™¨æ˜¯å®ç°ç¯å¢ƒæ„ŸçŸ¥å’Œè½¦è¾†å®šä½çš„å…³é”®ã€‚æœ¬æ–‡ä»¥ ROS æ¡†æ¶ä¸ºåŸºç¡€ï¼Œè®²è§£å¦‚ä½•ç¼–å†™ä¸€ä¸ªç®€å•çš„ä¼ æ„Ÿå™¨é©±åŠ¨èŠ‚ç‚¹ï¼Œå®ç°æ•°æ®é‡‡é›† â†’ è§£æ â†’ å‘å¸ƒ â†’ å¯è§†åŒ–ï¼Œå¹¶é™„å¸¦å¸¸è§è°ƒè¯•å‘½ä»¤ã€‚

1. é¡¹ç›®ç»“æ„
my_sensor_driver/
â”œâ”€â”€ launch/
â”‚   â””â”€â”€ sensor_driver.launch
â”œâ”€â”€ src/
â”‚   â””â”€â”€ imu_driver_node.cpp
â”œâ”€â”€ include/
â”‚   â””â”€â”€ imu_driver.hpp
â”œâ”€â”€ config/
â”‚   â””â”€â”€ imu_config.yaml
â”œâ”€â”€ CMakeLists.txt
â”œâ”€â”€ package.xml


my_sensor_driverï¼š ROS package æ ¹ç›®å½•ï¼Œæ‰€æœ‰å†…å®¹éƒ½æ”¾åœ¨è¿™é‡Œ


launch/sensor_driver.launchï¼š

ROS çš„å¯åŠ¨è„šæœ¬ï¼Œç”¨ XML æ ¼å¼æè¿°ï¼š

å¯åŠ¨å“ªä¸ªèŠ‚ç‚¹ï¼ˆnodeï¼‰
ä½¿ç”¨å“ªäº›å‚æ•°æ–‡ä»¶ï¼ˆå¦‚ config/imu_config.yamlï¼‰
æ˜¯å¦è¾“å‡ºæ—¥å¿—åˆ°å±å¹•ç­‰
ç”¨æ³•ï¼šroslaunch my_sensor_driver sensor_driver.launch
ç¤ºä¾‹ï¼š

&lt;launch&gt;
&lt;!-- åŠ è½½ IMU å‚æ•°é…ç½® --&gt;
&lt;rosparam file=&#34;$(find my_sensor_driver)/config/imu_config.yaml&#34; command=&#34;load&#34;/&gt;

&lt;!-- å¯åŠ¨ IMU é©±åŠ¨èŠ‚ç‚¹ --&gt;
&lt;node name=&#34;imu_driver&#34; pkg=&#34;my_sensor_driver&#34; type=&#34;imu_driver_node&#34; output=&#34;screen&#34;/&gt;
&lt;/launch&gt;




src/imu_driver_node.cpp">
<meta name="author" content="">
<link rel="canonical" href="//localhost:1313/posts/ros%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css" integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF&#43;13Dyqob6ASlTrTye8=" rel="preload stylesheet" as="style">
<link rel="icon" href="//localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="//localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="//localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="//localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="//localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="//localhost:1313/posts/ros%E5%BC%80%E5%8F%91%E5%AE%9E%E6%88%98/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      å¦‚ä½•ä½¿ç”¨ C&#43;&#43; ç¼–å†™ä¸€ä¸ª ROS è®¾å¤‡é©±åŠ¨èŠ‚ç‚¹
    </h1>
    <div class="post-meta"><span title='2024-11-17 00:00:00 +0000 UTC'>November 17, 2024</span>

</div>
  </header> 
  <div class="post-content"><p>é€šè¿‡æœ¬æ¡ˆä¾‹å¯ä»¥æŒæ¡ï¼š</p>
<ul>
<li>å¦‚ä½•ä½¿ç”¨ C++ ç¼–å†™ä¸€ä¸ª ROS è®¾å¤‡é©±åŠ¨èŠ‚ç‚¹ï¼›</li>
<li>å¦‚ä½•è°ƒè¯• ROS å‘å¸ƒé¢‘ç‡ã€æ—¶é—´æˆ³å’Œæ¶ˆæ¯å†…å®¹ï¼›</li>
<li>å¦‚ä½•ç»“åˆ rosbag ä¸ rqt_plot åˆ†æä¼ æ„Ÿå™¨æ•°æ®çš„ç¨³å®šæ€§ï¼›</li>
<li>ä¸ºåç»­å¤šä¼ æ„Ÿå™¨æ—¶é—´åŒæ­¥ä¸èåˆï¼ˆå¦‚ EKFï¼‰æ‰“ä¸‹åŸºç¡€ã€‚</li>
</ul>
<h1 id="-å¤šä¼ æ„Ÿå™¨èåˆä¸­çš„-ros-é©±åŠ¨å¼€å‘å®æˆ˜æ¡ˆä¾‹">ğŸŒ å¤šä¼ æ„Ÿå™¨èåˆä¸­çš„ ROS é©±åŠ¨å¼€å‘å®æˆ˜æ¡ˆä¾‹<a hidden class="anchor" aria-hidden="true" href="#-å¤šä¼ æ„Ÿå™¨èåˆä¸­çš„-ros-é©±åŠ¨å¼€å‘å®æˆ˜æ¡ˆä¾‹">#</a></h1>
<p>åœ¨è‡ªåŠ¨é©¾é©¶ç³»ç»Ÿä¸­ï¼ŒIMUã€GNSS å’Œé›·è¾¾ç­‰ä¼ æ„Ÿå™¨æ˜¯å®ç°ç¯å¢ƒæ„ŸçŸ¥å’Œè½¦è¾†å®šä½çš„å…³é”®ã€‚æœ¬æ–‡ä»¥ ROS æ¡†æ¶ä¸ºåŸºç¡€ï¼Œè®²è§£å¦‚ä½•ç¼–å†™ä¸€ä¸ªç®€å•çš„ä¼ æ„Ÿå™¨é©±åŠ¨èŠ‚ç‚¹ï¼Œå®ç°æ•°æ®é‡‡é›† â†’ è§£æ â†’ å‘å¸ƒ â†’ å¯è§†åŒ–ï¼Œå¹¶é™„å¸¦å¸¸è§è°ƒè¯•å‘½ä»¤ã€‚</p>
<hr>
<h2 id="1-é¡¹ç›®ç»“æ„">1. é¡¹ç›®ç»“æ„<a hidden class="anchor" aria-hidden="true" href="#1-é¡¹ç›®ç»“æ„">#</a></h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>my_sensor_driver/
</span></span><span style="display:flex;"><span>â”œâ”€â”€ launch/
</span></span><span style="display:flex;"><span>â”‚   â””â”€â”€ sensor_driver.launch
</span></span><span style="display:flex;"><span>â”œâ”€â”€ src/
</span></span><span style="display:flex;"><span>â”‚   â””â”€â”€ imu_driver_node.cpp
</span></span><span style="display:flex;"><span>â”œâ”€â”€ include/
</span></span><span style="display:flex;"><span>â”‚   â””â”€â”€ imu_driver.hpp
</span></span><span style="display:flex;"><span>â”œâ”€â”€ config/
</span></span><span style="display:flex;"><span>â”‚   â””â”€â”€ imu_config.yaml
</span></span><span style="display:flex;"><span>â”œâ”€â”€ CMakeLists.txt
</span></span><span style="display:flex;"><span>â”œâ”€â”€ package.xml
</span></span></code></pre></div><ul>
<li>
<p>my_sensor_driverï¼š ROS package æ ¹ç›®å½•ï¼Œæ‰€æœ‰å†…å®¹éƒ½æ”¾åœ¨è¿™é‡Œ</p>
</li>
<li>
<p>launch/sensor_driver.launchï¼š</p>
<ul>
<li>ROS çš„å¯åŠ¨è„šæœ¬ï¼Œç”¨ XML æ ¼å¼æè¿°ï¼š
<ul>
<li>å¯åŠ¨å“ªä¸ªèŠ‚ç‚¹ï¼ˆnodeï¼‰</li>
<li>ä½¿ç”¨å“ªäº›å‚æ•°æ–‡ä»¶ï¼ˆå¦‚ config/imu_config.yamlï¼‰</li>
<li>æ˜¯å¦è¾“å‡ºæ—¥å¿—åˆ°å±å¹•ç­‰</li>
<li>ç”¨æ³•ï¼š<strong>roslaunch my_sensor_driver sensor_driver.launch</strong></li>
<li>ç¤ºä¾‹ï¼š</li>
</ul>
<pre tabindex="0"><code class="language-launch" data-lang="launch">&lt;launch&gt;
&lt;!-- åŠ è½½ IMU å‚æ•°é…ç½® --&gt;
&lt;rosparam file=&#34;$(find my_sensor_driver)/config/imu_config.yaml&#34; command=&#34;load&#34;/&gt;

&lt;!-- å¯åŠ¨ IMU é©±åŠ¨èŠ‚ç‚¹ --&gt;
&lt;node name=&#34;imu_driver&#34; pkg=&#34;my_sensor_driver&#34; type=&#34;imu_driver_node&#34; output=&#34;screen&#34;/&gt;
&lt;/launch&gt;
</code></pre></li>
</ul>
</li>
<li>
<p>src/imu_driver_node.cpp</p>
</li>
<li>
<p>C++ æºç æ–‡ä»¶ï¼Œå®ç°å¦‚ä¸‹åŠŸèƒ½ï¼š</p>
<ul>
<li>åˆå§‹åŒ– ROS èŠ‚ç‚¹</li>
<li>ä¸²å£è¯» IMU æ•°æ®</li>
<li>è§£æå¹¶å‘å¸ƒä¸º /imu/data ROS æ¶ˆæ¯</li>
</ul>
</li>
<li>
<p>include/imu_driver.hppï¼š å¤´æ–‡ä»¶ï¼Œé€šå¸¸ç”¨äºï¼š</p>
<ul>
<li>å£°æ˜ç±» ImuDriverã€å‡½æ•°ã€ç»“æ„ä½“ç­‰</li>
<li>å’Œ cpp åˆ†ç¦»ï¼Œä¾¿äºæ¨¡å—åŒ–ã€å¤ç”¨</li>
<li>å¦‚æœé¡¹ç›®ç®€å•ä¹Ÿå¯ä»¥çœç•¥ï¼Œç”¨äºâ€œè§„èŒƒåŒ–â€å¤§å‹é¡¹ç›®</li>
</ul>
</li>
<li>
<p>config/imu_config.yamlï¼šå‚æ•°é…ç½®æ–‡ä»¶ï¼Œç”¨äºå°† IMU é©±åŠ¨çš„å‚æ•°ï¼ˆå¦‚ä¸²å£å·ã€æ³¢ç‰¹ç‡ã€è¯é¢˜åç­‰ï¼‰å¤–éƒ¨åŒ–ç®¡ç†</p>
</li>
</ul>
<p>ç¤ºä¾‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">port</span>: <span style="color:#e6db74">&#34;/dev/ttyUSB0&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">baudrate</span>: <span style="color:#ae81ff">115200</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">frame_id</span>: <span style="color:#e6db74">&#34;imu_link&#34;</span>
</span></span></code></pre></div><p>åœ¨ sensor_driver.launch ä¸­é€šè¿‡ <strong>rosparam</strong> åŠ è½½ï¼š</p>
<pre tabindex="0"><code class="language-launch" data-lang="launch">&lt;rosparam file=&#34;$(find my_sensor_driver)/config/imu_config.yaml&#34; command=&#34;load&#34;/&gt;
</code></pre><ul>
<li>CMakeLists.txt:ROS çš„æ„å»ºè„šæœ¬:</li>
<li>ä½œç”¨ï¼š
<ul>
<li>ç¼–è¯‘ src/imu_driver_node.cpp â†’ å¯æ‰§è¡Œæ–‡ä»¶ imu_driver_node</li>
<li>æŒ‡å®šä¾èµ–ï¼ˆå¦‚ sensor_msgsã€roscppï¼‰</li>
</ul>
</li>
<li>ç¤ºä¾‹ï¼š</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-txt" data-lang="txt"><span style="display:flex;"><span>cmake_minimum_required(VERSION 3.0.2)
</span></span><span style="display:flex;"><span>project(my_sensor_driver)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>## ç¼–è¯‘ç±»å‹è®¾ç½®
</span></span><span style="display:flex;"><span>add_compile_options(-std=c++11)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>## æŸ¥æ‰¾ä¾èµ–çš„åŒ…
</span></span><span style="display:flex;"><span>find_package(catkin REQUIRED COMPONENTS
</span></span><span style="display:flex;"><span>  roscpp
</span></span><span style="display:flex;"><span>  sensor_msgs
</span></span><span style="display:flex;"><span>  std_msgs
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>## ç”Ÿæˆæ¶ˆæ¯çš„è·¯å¾„è®¾ç½®
</span></span><span style="display:flex;"><span>catkin_package()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>include_directories(
</span></span><span style="display:flex;"><span>  include
</span></span><span style="display:flex;"><span>  ${catkin_INCLUDE_DIRS}
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>## ç¼–è¯‘å¯æ‰§è¡Œæ–‡ä»¶
</span></span><span style="display:flex;"><span>add_executable(imu_driver_node src/imu_driver_node.cpp)
</span></span><span style="display:flex;"><span>target_link_libraries(imu_driver_node ${catkin_LIBRARIES})
</span></span></code></pre></div><p>package.xml: ROS çš„åŒ…æè¿°æ–‡ä»¶</p>
<ul>
<li>
<p>ä½œç”¨ï¼š</p>
<ul>
<li>
<p>å‘Šè¯‰ ROS è¿™ä¸ªåŒ…çš„åç§°ã€ä¾èµ–åº“ã€ä½œè€…ä¿¡æ¯ç­‰</p>
</li>
<li>
<p>é…åˆ catkin_make ä½¿ç”¨</p>
</li>
</ul>
</li>
</ul>
<p>ç¤ºä¾‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;package</span> <span style="color:#a6e22e">format=</span><span style="color:#e6db74">&#34;2&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;name&gt;</span>my_sensor_driver<span style="color:#f92672">&lt;/name&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;version&gt;</span>0.0.1<span style="color:#f92672">&lt;/version&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;description&gt;</span>Minimal ROS sensor driver package<span style="color:#f92672">&lt;/description&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;maintainer</span> <span style="color:#a6e22e">email=</span><span style="color:#e6db74">&#34;your_email@example.com&#34;</span><span style="color:#f92672">&gt;</span>Your Name<span style="color:#f92672">&lt;/maintainer&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;license&gt;</span>BSD<span style="color:#f92672">&lt;/license&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;buildtool_depend&gt;</span>catkin<span style="color:#f92672">&lt;/buildtool_depend&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;depend&gt;</span>roscpp<span style="color:#f92672">&lt;/depend&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;depend&gt;</span>sensor_msgs<span style="color:#f92672">&lt;/depend&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;depend&gt;</span>std_msgs<span style="color:#f92672">&lt;/depend&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;export&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;/export&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/package&gt;</span>
</span></span></code></pre></div><p>ä½¿ç”¨ catkin_makeæ‰“åŒ…ä¸è¿è¡Œæµç¨‹:</p>
<pre tabindex="0"><code>cd ~/catkin_ws
catkin_make
source devel/setup.bash
roslaunch my_sensor_driver sensor_driver.launch
</code></pre><p>TODO:
æ¨¡æ‹Ÿ IMU ä¸²å£å‘é€è„šæœ¬ï¼ˆmock_imu_sender.pyï¼‰
æ¨¡æ‹Ÿ GNSS ROS èŠ‚ç‚¹ï¼ˆmock_gnss_node.pyï¼‰
EKF launch æ–‡ä»¶</p>
<hr>
<h2 id="2-é©±åŠ¨é€»è¾‘æ ¸å¿ƒsrcimu_driver_nodecppéƒ¨åˆ†ä»£ç ç¤ºä¾‹">2. é©±åŠ¨é€»è¾‘æ ¸å¿ƒï¼ˆsrc/imu_driver_node.cppéƒ¨åˆ†ä»£ç ç¤ºä¾‹ï¼‰<a hidden class="anchor" aria-hidden="true" href="#2-é©±åŠ¨é€»è¾‘æ ¸å¿ƒsrcimu_driver_nodecppéƒ¨åˆ†ä»£ç ç¤ºä¾‹">#</a></h2>
<p>å®ç°è¯»å–ä¸²å£æ•°æ®å¹¶å‘å¸ƒä¸º /imu/data çš„é€»è¾‘</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;ros/ros.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;sensor_msgs/Imu.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;serial/serial.h&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;string&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&lt;sstream&gt;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// æ¨¡æ‹Ÿè§£æå‡½æ•°ï¼šä»åŸå§‹å­—ç¬¦ä¸²ä¸­æå–å››å…ƒæ•°ï¼ˆå®é™…åº”ä¾æ®å…·ä½“åè®®å®ç°ï¼‰
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> <span style="color:#a6e22e">parseIMUData</span>(<span style="color:#66d9ef">const</span> std<span style="color:#f92672">::</span>string<span style="color:#f92672">&amp;</span> raw, sensor_msgs<span style="color:#f92672">::</span>Imu<span style="color:#f92672">&amp;</span> imu_msg) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// ç¤ºä¾‹æ•°æ®: &#34;0.0,0.0,0.0,1.0&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    std<span style="color:#f92672">::</span>stringstream ss(raw);
</span></span><span style="display:flex;"><span>    std<span style="color:#f92672">::</span>string item;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">float</span> q[<span style="color:#ae81ff">4</span>];
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> (std<span style="color:#f92672">::</span>getline(ss, item, <span style="color:#e6db74">&#39;,&#39;</span>) <span style="color:#f92672">&amp;&amp;</span> i <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">4</span>) {
</span></span><span style="display:flex;"><span>        q[i<span style="color:#f92672">++</span>] <span style="color:#f92672">=</span> std<span style="color:#f92672">::</span>stof(item);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    imu_msg.orientation.x <span style="color:#f92672">=</span> q[<span style="color:#ae81ff">0</span>];
</span></span><span style="display:flex;"><span>    imu_msg.orientation.y <span style="color:#f92672">=</span> q[<span style="color:#ae81ff">1</span>];
</span></span><span style="display:flex;"><span>    imu_msg.orientation.z <span style="color:#f92672">=</span> q[<span style="color:#ae81ff">2</span>];
</span></span><span style="display:flex;"><span>    imu_msg.orientation.w <span style="color:#f92672">=</span> q[<span style="color:#ae81ff">3</span>];
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>(<span style="color:#66d9ef">int</span> argc, <span style="color:#66d9ef">char</span><span style="color:#f92672">**</span> argv) {
</span></span><span style="display:flex;"><span>    ros<span style="color:#f92672">::</span>init(argc, argv, <span style="color:#e6db74">&#34;imu_driver_node&#34;</span>);
</span></span><span style="display:flex;"><span>    ros<span style="color:#f92672">::</span>NodeHandle nh;
</span></span><span style="display:flex;"><span>    ros<span style="color:#f92672">::</span>NodeHandle pnh(<span style="color:#e6db74">&#34;~&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    std<span style="color:#f92672">::</span>string port;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">int</span> baudrate;
</span></span><span style="display:flex;"><span>    std<span style="color:#f92672">::</span>string frame_id;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// è·å–å‚æ•°
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    pnh.param<span style="color:#f92672">&lt;</span>std<span style="color:#f92672">::</span>string<span style="color:#f92672">&gt;</span>(<span style="color:#e6db74">&#34;port&#34;</span>, port, <span style="color:#e6db74">&#34;/dev/ttyUSB0&#34;</span>);
</span></span><span style="display:flex;"><span>    pnh.param<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span>(<span style="color:#e6db74">&#34;baudrate&#34;</span>, baudrate, <span style="color:#ae81ff">115200</span>);
</span></span><span style="display:flex;"><span>    pnh.param<span style="color:#f92672">&lt;</span>std<span style="color:#f92672">::</span>string<span style="color:#f92672">&gt;</span>(<span style="color:#e6db74">&#34;frame_id&#34;</span>, frame_id, <span style="color:#e6db74">&#34;imu_link&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// åˆå§‹åŒ–ä¸²å£
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    serial<span style="color:#f92672">::</span>Serial ser;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">try</span> {
</span></span><span style="display:flex;"><span>        ser.setPort(port);
</span></span><span style="display:flex;"><span>        ser.setBaudrate(baudrate);
</span></span><span style="display:flex;"><span>        serial<span style="color:#f92672">::</span>Timeout to <span style="color:#f92672">=</span> serial<span style="color:#f92672">::</span>Timeout<span style="color:#f92672">::</span>simpleTimeout(<span style="color:#ae81ff">1000</span>);
</span></span><span style="display:flex;"><span>        ser.setTimeout(to);
</span></span><span style="display:flex;"><span>        ser.open();
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">catch</span> (serial<span style="color:#f92672">::</span>IOException<span style="color:#f92672">&amp;</span> e) {
</span></span><span style="display:flex;"><span>        ROS_ERROR_STREAM(<span style="color:#e6db74">&#34;Unable to open port &#34;</span> <span style="color:#f92672">&lt;&lt;</span> port);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>ser.isOpen()) {
</span></span><span style="display:flex;"><span>        ROS_ERROR_STREAM(<span style="color:#e6db74">&#34;Serial port not opened.&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    ros<span style="color:#f92672">::</span>Publisher imu_pub <span style="color:#f92672">=</span> nh.advertise<span style="color:#f92672">&lt;</span>sensor_msgs<span style="color:#f92672">::</span>Imu<span style="color:#f92672">&gt;</span>(<span style="color:#e6db74">&#34;/imu/data&#34;</span>, <span style="color:#ae81ff">50</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    ROS_INFO_STREAM(<span style="color:#e6db74">&#34;IMU Driver Started on &#34;</span> <span style="color:#f92672">&lt;&lt;</span> port <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34; at &#34;</span> <span style="color:#f92672">&lt;&lt;</span> baudrate <span style="color:#f92672">&lt;&lt;</span> <span style="color:#e6db74">&#34; baudrate.&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    ros<span style="color:#f92672">::</span>Rate loop_rate(<span style="color:#ae81ff">50</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">while</span> (ros<span style="color:#f92672">::</span>ok()) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">if</span> (ser.available()) {
</span></span><span style="display:flex;"><span>            std<span style="color:#f92672">::</span>string raw_data <span style="color:#f92672">=</span> ser.readline();
</span></span><span style="display:flex;"><span>            sensor_msgs<span style="color:#f92672">::</span>Imu imu_msg;
</span></span><span style="display:flex;"><span>            imu_msg.header.stamp <span style="color:#f92672">=</span> ros<span style="color:#f92672">::</span>Time<span style="color:#f92672">::</span>now();
</span></span><span style="display:flex;"><span>            imu_msg.header.frame_id <span style="color:#f92672">=</span> frame_id;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            parseIMUData(raw_data, imu_msg);
</span></span><span style="display:flex;"><span>            imu_pub.publish(imu_msg);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        ros<span style="color:#f92672">::</span>spinOnce();
</span></span><span style="display:flex;"><span>        loop_rate.sleep();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><hr>
<h2 id="-3-launch-æ–‡ä»¶ç¤ºä¾‹">ğŸš€ 3. Launch æ–‡ä»¶ç¤ºä¾‹<a hidden class="anchor" aria-hidden="true" href="#-3-launch-æ–‡ä»¶ç¤ºä¾‹">#</a></h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;launch&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;node</span> <span style="color:#a6e22e">pkg=</span><span style="color:#e6db74">&#34;my_sensor_driver&#34;</span> <span style="color:#a6e22e">type=</span><span style="color:#e6db74">&#34;imu_driver_node&#34;</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;imu_driver&#34;</span> <span style="color:#a6e22e">output=</span><span style="color:#e6db74">&#34;screen&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/launch&gt;</span>
</span></span></code></pre></div><hr>
<h2 id="4-å¸¸ç”¨-ros-è°ƒè¯•å‘½ä»¤æ¨èæ“ä½œé¡ºåº">4. å¸¸ç”¨ ROS è°ƒè¯•å‘½ä»¤ï¼ˆæ¨èæ“ä½œé¡ºåºï¼‰<a hidden class="anchor" aria-hidden="true" href="#4-å¸¸ç”¨-ros-è°ƒè¯•å‘½ä»¤æ¨èæ“ä½œé¡ºåº">#</a></h2>
<table>
  <thead>
      <tr>
          <th>æ“ä½œç›®çš„</th>
          <th>å¸¸ç”¨å‘½ä»¤</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>æŸ¥çœ‹ topic å‘å¸ƒé¢‘ç‡</td>
          <td><code>rostopic hz /imu/data</code></td>
      </tr>
      <tr>
          <td>æŸ¥çœ‹å‘å¸ƒæ•°æ®å†…å®¹</td>
          <td><code>rostopic echo /imu/data</code></td>
      </tr>
      <tr>
          <td>æŸ¥çœ‹æ‰€æœ‰æ´»è·ƒèŠ‚ç‚¹</td>
          <td><code>rosnode list</code></td>
      </tr>
      <tr>
          <td>æ£€æŸ¥èŠ‚ç‚¹çŠ¶æ€</td>
          <td><code>rosnode info /imu_driver</code></td>
      </tr>
      <tr>
          <td>å¯è§†åŒ–æ•°æ®</td>
          <td><code>rqt_plot /imu/data.orientation.x</code></td>
      </tr>
      <tr>
          <td>å½•åˆ¶è°ƒè¯•æ—¥å¿—</td>
          <td><code>rosbag record -O imu_log.bag /imu/data</code></td>
      </tr>
      <tr>
          <td>æ’­æ”¾ rosbag æ—¥å¿—</td>
          <td><code>rosbag play imu_log.bag</code></td>
      </tr>
  </tbody>
</table>
<hr>
<h2 id="5-å»¶è¿Ÿä¸é¢‘ç‡éªŒè¯æŠ€å·§">5. å»¶è¿Ÿä¸é¢‘ç‡éªŒè¯æŠ€å·§<a hidden class="anchor" aria-hidden="true" href="#5-å»¶è¿Ÿä¸é¢‘ç‡éªŒè¯æŠ€å·§">#</a></h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># æŸ¥çœ‹å»¶è¿Ÿï¼ˆæ˜¯å¦ timestamp ç¨³å®šï¼‰</span>
</span></span><span style="display:flex;"><span>rostopic echo -n <span style="color:#ae81ff">5</span> /imu/data | grep <span style="color:#e6db74">&#34;stamp&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ç»˜åˆ¶æ•°æ®é—´éš”æ—¶é—´</span>
</span></span><span style="display:flex;"><span>rqt_plot /imu/data.header.stamp
</span></span></code></pre></div><hr>
<h2 id="6-æ€»ç»“">6. æ€»ç»“<a hidden class="anchor" aria-hidden="true" href="#6-æ€»ç»“">#</a></h2>
<p>ä¸‹ä¸€æ­¥æ˜¯ æ•´åˆ GNSS æ•°æ®ï¼Œå¹¶ä½¿ç”¨ <code>message_filters::ApproximateTime</code> å®ç° IMU + GNSS æ—¶é—´åŒæ­¥ã€‚</p>
<h1 id="-gnss--imu-èåˆå®šä½åŸºäº-ros--ekf">ğŸ›°ï¸ GNSS + IMU èåˆå®šä½ï¼ˆåŸºäº ROS + EKFï¼‰<a hidden class="anchor" aria-hidden="true" href="#-gnss--imu-èåˆå®šä½åŸºäº-ros--ekf">#</a></h1>
<p>æ¥ä¸‹æ¥è¿™éƒ¨åˆ†å°†ä»‹ç»å¦‚ä½•åŸºäº ROS æ¡†æ¶å°† GNSS ä¸ IMU æ•°æ®è¿›è¡Œèåˆï¼Œåˆ©ç”¨ <code>robot_localization</code> åŒ…ä¸­çš„ EKF èŠ‚ç‚¹å®ç°è½¦è¾†ä½ç½®ä¼°è®¡ï¼Œæé«˜å®šä½çš„é²æ£’æ€§å’Œç²¾åº¦ã€‚</p>
<hr>
<h2 id="1-ä½¿ç”¨åŒ…ä¾èµ–">1. ä½¿ç”¨åŒ…ä¾èµ–<a hidden class="anchor" aria-hidden="true" href="#1-ä½¿ç”¨åŒ…ä¾èµ–">#</a></h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo apt install ros-&lt;distro&gt;-robot-localization
</span></span></code></pre></div><hr>
<h2 id="2-æ•°æ®å‡†å¤‡">2. æ•°æ®å‡†å¤‡<a hidden class="anchor" aria-hidden="true" href="#2-æ•°æ®å‡†å¤‡">#</a></h2>
<h3 id="è¾“å…¥æ•°æ®">è¾“å…¥æ•°æ®ï¼š<a hidden class="anchor" aria-hidden="true" href="#è¾“å…¥æ•°æ®">#</a></h3>
<ul>
<li><code>/imu/data</code>ï¼šIMU åŸå§‹æ•°æ®ï¼ˆæ–¹å‘ã€åŠ é€Ÿåº¦ï¼‰</li>
<li><code>/gps/fix</code>ï¼šGNSS æ•°æ®ï¼ˆ<code>sensor_msgs/NavSatFix</code>ï¼‰</li>
</ul>
<h3 id="å¯é€‰å¢å¼ºæ•°æ®">å¯é€‰å¢å¼ºæ•°æ®ï¼š<a hidden class="anchor" aria-hidden="true" href="#å¯é€‰å¢å¼ºæ•°æ®">#</a></h3>
<ul>
<li><code>/gps/vel</code>ï¼šGNSS é€Ÿåº¦ä¿¡æ¯</li>
<li><code>/odometry/wheel</code>ï¼šè½®é€Ÿè®¡ï¼ˆç”¨äºè¡¥å¿ GNSS ä¿¡å·ä¸¢å¤±ï¼‰</li>
</ul>
<hr>
<h2 id="3-ekf-èŠ‚ç‚¹é…ç½®æ–‡ä»¶ekfyaml">3. EKF èŠ‚ç‚¹é…ç½®æ–‡ä»¶ï¼ˆekf.yamlï¼‰<a hidden class="anchor" aria-hidden="true" href="#3-ekf-èŠ‚ç‚¹é…ç½®æ–‡ä»¶ekfyaml">#</a></h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#f92672">frequency</span>: <span style="color:#ae81ff">30</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">sensor_timeout</span>: <span style="color:#ae81ff">0.1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">two_d_mode</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">publish_tf</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">map_frame</span>: <span style="color:#ae81ff">map</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">odom_frame</span>: <span style="color:#ae81ff">odom</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">base_link_frame</span>: <span style="color:#ae81ff">base_link</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">world_frame</span>: <span style="color:#ae81ff">odom</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">imu0</span>: <span style="color:#ae81ff">/imu/data</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">imu0_config</span>: [<span style="color:#66d9ef">false</span>, <span style="color:#66d9ef">false</span>, <span style="color:#66d9ef">false</span>,
</span></span><span style="display:flex;"><span>              <span style="color:#66d9ef">true</span>, <span style="color:#66d9ef">true</span>, <span style="color:#66d9ef">false</span>,
</span></span><span style="display:flex;"><span>              <span style="color:#66d9ef">false</span>, <span style="color:#66d9ef">false</span>, <span style="color:#66d9ef">false</span>,
</span></span><span style="display:flex;"><span>              <span style="color:#66d9ef">false</span>, <span style="color:#66d9ef">false</span>, <span style="color:#66d9ef">false</span>,
</span></span><span style="display:flex;"><span>              <span style="color:#66d9ef">false</span>, <span style="color:#66d9ef">false</span>, <span style="color:#66d9ef">false</span>]
</span></span><span style="display:flex;"><span><span style="color:#f92672">imu0_differential</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">imu0_remove_gravitational_acceleration</span>: <span style="color:#66d9ef">true</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">gps0</span>: <span style="color:#ae81ff">/gps/fix</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">gps0_config</span>: [<span style="color:#66d9ef">true</span>, <span style="color:#66d9ef">true</span>, <span style="color:#66d9ef">false</span>,
</span></span><span style="display:flex;"><span>              <span style="color:#66d9ef">false</span>, <span style="color:#66d9ef">false</span>, <span style="color:#66d9ef">false</span>,
</span></span><span style="display:flex;"><span>              <span style="color:#66d9ef">false</span>, <span style="color:#66d9ef">false</span>, <span style="color:#66d9ef">false</span>,
</span></span><span style="display:flex;"><span>              <span style="color:#66d9ef">false</span>, <span style="color:#66d9ef">false</span>, <span style="color:#66d9ef">false</span>,
</span></span><span style="display:flex;"><span>              <span style="color:#66d9ef">false</span>, <span style="color:#66d9ef">false</span>, <span style="color:#66d9ef">false</span>]
</span></span><span style="display:flex;"><span><span style="color:#f92672">gps0_differential</span>: <span style="color:#66d9ef">false</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">use_control</span>: <span style="color:#66d9ef">false</span>
</span></span></code></pre></div><hr>
<h2 id="4-å¯åŠ¨æ–‡ä»¶ekf_fusionlaunch">4. å¯åŠ¨æ–‡ä»¶ï¼ˆekf_fusion.launchï¼‰<a hidden class="anchor" aria-hidden="true" href="#4-å¯åŠ¨æ–‡ä»¶ekf_fusionlaunch">#</a></h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;launch&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;node</span> <span style="color:#a6e22e">pkg=</span><span style="color:#e6db74">&#34;robot_localization&#34;</span> <span style="color:#a6e22e">type=</span><span style="color:#e6db74">&#34;ekf_localization_node&#34;</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;ekf_localization&#34;</span> <span style="color:#a6e22e">output=</span><span style="color:#e6db74">&#34;screen&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;param</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;~config&#34;</span> <span style="color:#a6e22e">value=</span><span style="color:#e6db74">&#34;$(find your_package)/config/ekf.yaml&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;/node&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/launch&gt;</span>
</span></span></code></pre></div><hr>
<h2 id="5-å¯è§†åŒ–ä¸éªŒè¯">5. å¯è§†åŒ–ä¸éªŒè¯<a hidden class="anchor" aria-hidden="true" href="#5-å¯è§†åŒ–ä¸éªŒè¯">#</a></h2>
<h3 id="æ¨èæŒ‡ä»¤">æ¨èæŒ‡ä»¤ï¼š<a hidden class="anchor" aria-hidden="true" href="#æ¨èæŒ‡ä»¤">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># æŸ¥çœ‹å®šä½èåˆç»“æœ</span>
</span></span><span style="display:flex;"><span>rostopic echo /odometry/filtered
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># ç”¨ rviz æ˜¾ç¤ºè·¯å¾„è½¨è¿¹</span>
</span></span><span style="display:flex;"><span>rviz
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># å¯¹æ¯” GNSS åŸå§‹ä¸ EKF èåˆè¾“å‡º</span>
</span></span><span style="display:flex;"><span>rqt_plot /gps/fix/latitude /odometry/filtered/pose/pose/position/x
</span></span></code></pre></div><hr>
<h2 id="6-é—®é¢˜æ’æŸ¥å»ºè®®">6. é—®é¢˜æ’æŸ¥å»ºè®®<a hidden class="anchor" aria-hidden="true" href="#6-é—®é¢˜æ’æŸ¥å»ºè®®">#</a></h2>
<table>
  <thead>
      <tr>
          <th>é—®é¢˜</th>
          <th>åŸå› </th>
          <th>è§£å†³å»ºè®®</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>èåˆè¾“å‡ºè·³å˜ / æ— è¾“å‡º</td>
          <td>æ—¶é—´æˆ³ä¸ä¸€è‡´</td>
          <td>ç¡®ä¿æ‰€æœ‰è¯é¢˜æ—¶é—´åŒæ­¥ï¼ˆä½¿ç”¨ rosbag + <code>--clock</code>ï¼‰</td>
      </tr>
      <tr>
          <td>EKF è¾“å‡ºå»¶è¿Ÿå¤§</td>
          <td>é¢‘ç‡è®¾ç½®å¤ªä½æˆ–topicä¸æ´»è·ƒ</td>
          <td>å¢åŠ  <code>frequency</code>ï¼Œç¡®è®¤è¾“å…¥è¯é¢˜æ´»è·ƒ</td>
      </tr>
      <tr>
          <td>æ•°æ®æ¼‚ç§»ä¸¥é‡</td>
          <td>IMU é‡åŠ›æœªå‰”é™¤</td>
          <td>è®¾ç½® <code>imu0_remove_gravitational_acceleration: true</code></td>
      </tr>
      <tr>
          <td>èåˆå¤±è´¥æŠ¥é”™</td>
          <td>é…ç½®å­—æ®µé¡ºåºé”™è¯¯</td>
          <td>æ£€æŸ¥æ¯ä¸ª <code>*_config</code> æ•°ç»„é•¿åº¦ä¸º15ï¼Œé¡ºåºä¸¥æ ¼</td>
      </tr>
  </tbody>
</table>
<hr>
<h2 id="7-æ€»ç»“">7. æ€»ç»“<a hidden class="anchor" aria-hidden="true" href="#7-æ€»ç»“">#</a></h2>
<p>é€šè¿‡æœ¬æ¡ˆä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥æŒæ¡ï¼š</p>
<ul>
<li>ä½¿ç”¨ <code>robot_localization</code> è¿›è¡Œ GNSS + IMU èåˆå®šä½ï¼›</li>
<li>å¦‚ä½•é…ç½® EKF å‚æ•°ä»¥é€‚é…ä¸åŒä¼ æ„Ÿå™¨ç‰¹æ€§ï¼›</li>
<li>å¦‚ä½•é€šè¿‡ rviz / rqt_plot è¿›è¡Œèåˆç»“æœéªŒè¯ï¼›</li>
<li>ä»¥åŠæ—¶é—´åŒæ­¥ã€æ¼‚ç§»ä¿®æ­£ç­‰å¸¸è§é—®é¢˜çš„å¤„ç†æ–¹æ³•ã€‚</li>
</ul>
<p>ä¸‹ä¸€æ­¥æˆ‘ä»¬å¯ä»¥å°è¯•åŠ å…¥è½®é€Ÿè®¡ã€è§†è§‰é‡Œç¨‹è®¡ç­‰ï¼Œè¿›è¡Œä¸‰ä¼ æ„Ÿå™¨èåˆã€‚</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="//localhost:1313/tags/c&#43;&#43;/">C&#43;&#43;</a></li>
      <li><a href="//localhost:1313/tags/%E4%BC%A0%E6%84%9F%E5%99%A8%E9%A9%B1%E5%8A%A8/">ä¼ æ„Ÿå™¨é©±åŠ¨</a></li>
      <li><a href="//localhost:1313/tags/imu/">IMU</a></li>
      <li><a href="//localhost:1313/tags/rosbag/">Rosbag</a></li>
      <li><a href="//localhost:1313/tags/%E8%87%AA%E5%8A%A8%E9%A9%BE%E9%A9%B6/">è‡ªåŠ¨é©¾é©¶</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<script src="/js/cursor-effects.js"></script>
<script>
  new CursorEffects({
    size: 2,
    shape: 'star',
    zIndex: 9999,
  });
</script>
</body>

</html>
